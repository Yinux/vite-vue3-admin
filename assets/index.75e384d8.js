var x=Object.defineProperty,_=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var u=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var p=(n,t,e)=>t in n?x(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,m=(n,t)=>{for(var e in t||(t={}))C.call(t,e)&&p(n,e,t[e]);if(u)for(var e of u(t))S.call(t,e)&&p(n,e,t[e]);return n},f=(n,t)=>_(n,w(t));var g=(n,t,e)=>new Promise((i,o)=>{var a=r=>{try{l(e.next(r))}catch(c){o(c)}},s=r=>{try{l(e.throw(r))}catch(c){o(c)}},l=r=>r.done?i(r.value):Promise.resolve(r.value).then(a,s);l((e=e.apply(n,t)).next())});import{u as I}from"./dynamic-table.1a17b6c9.js";import{bB as k,da as b,db as O,k as y,o as B,G as E,d as M,I as q,V as v,W as h,c as d,aC as F,a4 as V,a7 as j}from"./index.44725425.js";import"./pick.b8be7556.js";import"./index.948778ba.js";import"./css.82a45a0b.js";import"./schema-form.309c9adc.js";import"./index.5aa97db4.js";import"./index.93fa4281.js";import"./zh_CN.4c83cac5.js";function D(){return k({url:b.list,method:"get"})}function N(n){return k({url:b.kick,method:"post",data:n})}const U=(n={})=>{const t=O().client,e=new Map,i=()=>{Object.keys(n).forEach(a=>{if(t){const s=n[a];e.set(a,s),t.subscribe(a,s)}})},o=()=>{Object.keys(n).forEach(a=>{t&&e.has(a)&&t.unsubscribe(a,e.get(a))})};y(()=>t,i),B(i),E(o)},W={name:"SystemMonitorOnline"};var T=M(f(m({},W),{setup(n){const[t,e]=I();U({connect(){e==null||e.reload()},online(){e==null||e.reload()},offline(){e==null||e.reload()}});const i=[{title:"#",dataIndex:"id",width:80,align:"center",hideInSearch:!0},{title:"\u7528\u6237\u540D",dataIndex:"username",align:"center",bodyCell:({record:a})=>d(j,null,[d("span",{class:"pr-16px"},[a.username]),a.isCurrent&&d(F,{color:"red"},{default:()=>[V("\u5F53\u524D")]})])},{title:"\u767B\u5F55IP",dataIndex:"ip",width:140,align:"center"},{title:"\u767B\u5F55\u65F6\u95F4",dataIndex:"time",align:"center"},{title:"\u64CD\u4F5C\u7CFB\u7EDF",dataIndex:"os",align:"center"},{title:"\u6D4F\u89C8\u5668",dataIndex:"browser",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"$action",align:"center",actions:({record:a})=>[{label:"\u4E0B\u7EBF",auth:"sys.online.kick",disabled:a.disable,popConfirm:{title:"\u786E\u5B9A\u4E0B\u7EBF\u8BE5\u7528\u6237\u5417?",onConfirm:()=>o(a)}}]}],o=a=>g(this,null,function*(){yield N({id:a.id})});return(a,s)=>(q(),v(h(t),{ref:"dynamicTableRef","header-title":"\u5728\u7EBF\u7528\u6237","title-tooltip":"\u8FD9\u662F\u771F\u5B9E\u64CD\u4F5C\uFF0C\u8BF7\u4E0D\u8981\u968F\u610F\u5C06\u5176\u4ED6\u7528\u6237\u8E22\u4E0B\u7EBF\u3002","data-request":h(D),columns:i},null,8,["data-request"]))}}));export{T as default};
