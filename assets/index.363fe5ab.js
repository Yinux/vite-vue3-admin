var O=Object.defineProperty,P=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var w=(e,t,n)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v=(e,t)=>{for(var n in t||(t={}))q.call(t,n)&&w(e,n,t[n]);if(k)for(var n of k(t))R.call(t,n)&&w(e,n,t[n]);return e},C=(e,t)=>P(e,N(t));var g=(e,t,n)=>new Promise((m,p)=>{var c=a=>{try{o(n.next(a))}catch(u){p(u)}},l=a=>{try{o(n.throw(a))}catch(u){p(u)}},o=a=>a.done?m(a.value):Promise.resolve(a.value).then(c,l);o((n=n.apply(e,t)).next())});import{c as s,aC as V,bz as T,a7 as j,dp as W,d as S,j as I,m as z,o as H,n as X,l as $,W as x,cs as U,af as Y,dq as J,dr as K,b0 as G,ax as Q,Y as Z,U as ee,I as te,J as ne,a3 as h,a4 as _}from"./index.44725425.js";import{I as oe,a as le,j as ae}from"./index.801c7a58.js";import{u as re}from"./dynamic-table.1a17b6c9.js";import{g as ie}from"./hero.f3d7d6d4.js";import{M as F}from"./pick.b8be7556.js";import{u as se}from"./useFormModal.29273de1.js";import{A as ue}from"./index.f164cbea.js";import{C as ce}from"./Card.cafd124d.js";import"./index.699e4557.js";import"./css.82a45a0b.js";import"./schema-form.309c9adc.js";import"./index.5aa97db4.js";import"./index.93fa4281.js";import"./index.948778ba.js";import"./zh_CN.4c83cac5.js";import"./index.2e2c2bac.js";import"./Tabs.3ecb3ebc.js";import"./PlusOutlined.f3c39d24.js";function de(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!T(e)}const M=[{title:"\u5934\u50CF",align:"center",width:100,hideInSearch:!0,dataIndex:"avatar",bodyCell:({record:e})=>s(oe,{src:e.avatar,preview:{src:e.posters},key:e.avatar},null)},{title:"\u82F1\u96C4\u540D\u79F0",align:"center",dataIndex:"title"},{title:"\u82F1\u96C4\u79F0\u53F7",align:"center",dataIndex:"name"},{title:"\u5B9A\u4F4D",align:"center",dataIndex:"roles",bodyCell:({record:e})=>{var t;return s(j,null,[(t=e.roles)==null?void 0:t.map(n=>s(V,{color:"blue",key:n},de(n)?n:{default:()=>[n]}))])}},{title:"\u64CD\u4F5C",align:"center",width:120,dataIndex:"$action",actions:({record:e})=>[{label:"\u67E5\u770B\u8BE6\u60C5",onClick:()=>W.push({name:"demos-table-lol-info",params:{id:e.heroId}})}]}];function me(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!T(e)}const E="context-menu",pe={width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default(){return{x:0,y:0}}},items:{type:Array,default(){return[]}}},A=e=>{const{item:t}=e;return s("span",{style:"display: inline-block; width: 100%; ",class:"px-4",onClick:e.handler.bind(null,t)},[e.showIcon&&t.icon&&s(Y,{class:"mr-2",type:t.icon},null),s("span",null,[t.label])])};var xe=S({name:"ContextMenu",props:pe,setup(e){const t=I(null),n=I(!1),m=z(()=>{const{axis:l,items:o,styles:a,width:u}=e,{x:r,y:d}=l||{x:0,y:0},i=(o||[]).length*40,y=u,f=document.body,D=f.clientWidth<r+y?r-y:r,L=f.clientHeight<d+i?d-i:d;return C(v({},a),{position:"absolute",width:`${u}px`,left:`${D+1}px`,top:`${L+1}px`})});H(()=>{X(()=>n.value=!0)}),$(()=>{const l=x(t);l&&document.body.removeChild(l)});function p(l,o){const{handler:a,disabled:u}=l;u||(n.value=!1,o==null||o.stopPropagation(),o==null||o.preventDefault(),a==null||a())}function c(l){return l.map(o=>{const{disabled:a,label:u,children:r,divider:d=!1}=o,i={item:o,handler:p,showIcon:e.showIcon};return!r||r.length===0?s(j,null,[s(F.Item,{disabled:a,class:`${E}__item`,key:u},{default:()=>[s(A,i,null)]}),d?s(U,{key:`d-${u}`},null):null]):x(n)?s(F.SubMenu,{key:u,disabled:a,popupClassName:`${E}__popup`},{title:()=>s(A,i,null),default:()=>c(r)}):null})}return()=>{let l;if(!x(n))return null;const{items:o}=e;return s("div",{class:E},[s(F,{inlineIndent:12,mode:"vertical",ref:t,style:x(m)},me(l=c(o))?l:{default:()=>[l]})])}}});const b={domList:[],resolve:()=>({})},fe=function(e){const{event:t}=e||{};if(t&&(t==null||t.preventDefault()),!!J)return new Promise(n=>{const m=document.body,p=document.createElement("div"),c={};e.styles&&(c.styles=e.styles),e.items&&(c.items=e.items),e.event&&(c.customEvent=t,c.axis={x:t.clientX,y:t.clientY});const l=s(xe,c);K(l,p);const o=function(){b.resolve("")};b.domList.push(p);const a=function(){b.domList.forEach(u=>{try{u&&m.removeChild(u)}catch(r){console.error(r)}}),m.removeEventListener("click",o),m.removeEventListener("scroll",o)};b.resolve=function(u){a(),n(u)},a(),m.appendChild(p),m.addEventListener("click",o),m.addEventListener("scroll",o)})},B=function(){b&&(b.resolve(""),b.domList=[])};function he(e=!0){return G()&&e&&$(()=>{B()}),[fe,B]}const be=e=>[{field:"filename",component:"Input",label:e("component.excel.fileName"),rules:[{required:!0}]},{field:"bookType",component:"Select",label:e("component.excel.fileType"),defaultValue:"xlsx",rules:[{required:!0}],componentProps:{options:[{label:"xlsx",value:"xlsx",key:"xlsx"},{label:"html",value:"html",key:"html"},{label:"csv",value:"csv",key:"csv"},{label:"txt",value:"txt",key:"txt"}]}}],ye=()=>{const{t:e}=Q(),[t]=se();return{openModal:({onOk:m})=>{t({modalProps:{title:e("component.excel.exportModalTitle"),onFinish:p=>g(void 0,null,function*(){const{filename:c,bookType:l}=p;m({filename:`${c.split(".").shift()}.${l}`,bookType:l})})},formProps:{labelWidth:100,schemas:be(e)}})}}},_e=_(" \u82F1\u96C4\u8054\u76DF -- \u6839\u636E\u6570\u7EC4\u683C\u5F0F\u7684\u6570\u636E\u8FDB\u884C\u5BFC\u51FA "),ve=_("\u8868\u683C\u81EA\u5E26\u5BFC\u51FA"),Ce=_(" \u6570\u7EC4\u683C\u5F0F\u5BFC\u51FA "),ge=_(" \u81EA\u5B9A\u4E49\u5BFC\u51FA\u683C\u5F0F "),Fe={name:"DemosTablesLolTable"},We=S(C(v({},Fe),{setup(e){const[t]=re(),n=Z(),[m]=he(),p=ye();let c=[];const l=()=>{const r=M.filter(i=>i.dataIndex!=="$action"),d=r.map(i=>i.dataIndex);le({data:c.map(i=>d.reduce((y,f)=>(y[f]=Array.isArray(i[f])?i[f].toString():i[f],y),{})).map(i=>Object.values(i)),header:r.map(i=>i.title),filename:"\u4E8C\u7EF4\u6570\u7EC4\u65B9\u5F0F\u5BFC\u51FAexcel.xlsx"})},o=()=>{p.openModal({onOk:({filename:r,bookType:d})=>{ae({data:c,filename:r,write2excelOpts:{bookType:d}})}})},a=r=>g(this,null,function*(){const{data:d}=yield ie(r);return c=d.list,d}),u=r=>({onContextmenu:d=>{m({event:d,items:[{label:"\u67E5\u770B",handler:()=>{n.push({name:"demos-table-lol-info",params:{id:r.heroId}})}},{label:"\u7F16\u8F91",handler:()=>{}}]})}});return(r,d)=>{const i=ee("a-button");return te(),ne("div",null,[s(x(ue),{message:"\u6E38\u620F\u4ECB\u7ECD",type:"info","show-icon":""},{description:h(()=>[_e]),_:1}),s(x(ce),{title:"\u82F1\u96C4\u5217\u8868mock\u6570\u636E",style:{"margin-top":"20px"}},{default:h(()=>[s(x(t),{size:"small",bordered:"","data-request":a,columns:x(M),"row-key":"heroid","export-file-name":"\u8868\u683C\u81EA\u5E26\u5BFC\u51FA","custom-row":u},{"export-button":h(()=>[s(i,{type:"primary"},{default:h(()=>[ve]),_:1})]),toolbar:h(()=>[s(i,{type:"primary",onClick:l},{default:h(()=>[Ce]),_:1}),s(i,{type:"primary",onClick:o},{default:h(()=>[ge]),_:1})]),_:1},8,["columns"])]),_:1})])}}}));export{We as default};
